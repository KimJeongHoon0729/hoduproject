<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">
	<select id="login" resultType="com.woori.domain.UserVO">
		select  
			*   
		from   
			userjoin   
		where userId = #{userId}   
	
		
	</select>
	
	<select id="viewUser" resultType="com.woori.domain.UserVO">
		select * from userjoin where userId=#{userId} and userPw=#{userPw} 
	</select>

	
	<insert id="insertUser">
		INSERT INTO userjoin(userId, userPw, userName, userBirth, sex, userMobile, userEmail) 
			VALUES(#{userId},#{userPw},#{userName},#{userBirth},#{sex},#{userMobile},#{userEmail})
	
	</insert>

	<select id="viewProfile" resultType="com.woori.domain.UserVO">
		select * from userjoin where userId=#{userId}
	</select>
	
	<update id="editProfile" parameterType="com.woori.domain.UserVO">
		update  userjoin  set   
		userPw=#{userPw},  
		userName=#{userName},   
		userBirth=#{userBirth},  
		sex=#{sex},   
		userMobile=#{userMobile},  
		userEmail=#{userEmail}   
		where userId=#{userId}   
	</update>
	
	
	<!-- 아이디 중복체크 -->
	<select id="idCheck" resultType="int">
		SELECT COUNT(*) FROM userjoin WHERE userId=#{userId}
	
	</select>
	
	<delete id="deleteProfile">
		delete from  
		userjoin  
		where userId=#{userId}  
	</delete>
	
	<!-- question 리스트 출력 -->
	<select id="question" resultType="com.woori.domain.QuestionVO" parameterType="com.woori.domain.Criteria">
		select * from question   order by Q_idx    limit #{skip},#{amount} 
	</select>
	
	<!-- 게시물 개수 -->
	<select id="getTotal" resultType="int">
		select count(*) from question  
	</select>
	
	<!-- 게시물 비밀번호 -->
		<select id="Q_pwCheck" resultType="com.woori.domain.QuestionVO">
		select  
			*   
		from   
			question   
		where Q_idx = #{Q_idx} and Q_pw = #{Q_pw}     
	</select>
</mapper>